<script src="https://cdn.jsdelivr.net/npm/vue@next"></script>

<!-- The element with the same id should lay on the parent for it to work;
	otherwise, this element is sort of a provider of a default value -->
<input id="origin-api" type="hidden" value="http://localhost:8080" />

<div id="statistics-app">
	<!-- Filters -->
	<div>
		<div>
			Количество записей <input type="number" v-model.number="maxRecordsToShow" />
		</div>
		<div>
			От <input type="date" placeholder="От" v-model="dateFrom" />
			До <input type="date" placeholder="До" v-model="dateTo" />
		</div>
		<div>
			<label>
				<input type="radio" name="direction" v-model="direction" value="1" /> Импорт
			</label>
			<label>
				<input type="radio" name="direction" v-model="direction" value="2" /> Экспорт
			</label>
			<label>
				<input type="radio" name="direction" v-model="direction" value="" /> Оба
			</label>
		</div>
		<div>
			<input type="text" v-model="tnved" placeholder="ТН ВЭД начинается на..." />
		</div>

		<select multiple style="min-height: 200px; resize: both;" v-model="regions">
			<option v-for="value, key in allRegions" :value="key">{{key}} - {{value}}</option>
		</select>

		<select multiple style="min-height: 200px; resize: both;" v-model="countries">
			<option v-for="value, key in allCountries" :value="key">{{key}} - {{value}}</option>
		</select>

		<div>
			<button @click="updateCustomsRecords">Обновить данные</button>
		</div>
	</div>

	<div v-if="loaded">
		<!--summaryByDirectionAndMonth-->
		<div>
			По направлениям и месяцам: {{numberOfRecordsToShow(data.summaryByDirectionAndMonth)}}
			<ul>
				<li v-for="it in data.summaryByDirectionAndMonth.slice(0, maxRecordsToShow)">
					Item: {{it}}
				</li>
			</ul>
		</div>

		<!--summaryByCountry-->
		<div>
			По странам: {{numberOfRecordsToShow(data.summaryByCountry)}}
			<ul>
				<li v-for="it in data.summaryByCountry.slice(0, maxRecordsToShow)">
					Item: {{it}}
				</li>
			</ul>
		</div>

		<!--summaryByRegion-->
		<div>
			По регионам: {{numberOfRecordsToShow(data.summaryByRegion)}}
			<ul>
				<li v-for="it in data.summaryByRegion.slice(0, maxRecordsToShow)">
					Item: {{it}}
				</li>
			</ul>
		</div>

		<!--summaryByTnved-->
		<div>
			По ТН ВЭД: {{numberOfRecordsToShow(data.summaryByTnved)}}
			<ul>
				<li v-for="it in data.summaryByTnved.slice(0, maxRecordsToShow)">
					Item: {{it}}
				</li>
			</ul>
		</div>
	</div>
	<div v-else>
		<img src="loading.svg" />
	</div>
</div>

<script src="index.js"></script>
