@page
@using ExporterWeb.Helpers
@model ExporterWeb.Pages.Admin.Exporters.Index

@{
    Layout = "_AdminLayout";

    var approvedExporters = Model.GetExportersByStatus(ExporterStatus.Approved);
    var onModerationExporters = Model.GetExportersByStatus(ExporterStatus.OnModeration);
    var refusedExporters = Model.GetExportersByStatus(ExporterStatus.Refused);
}

<div class="container-fluid page__heading-container">
    <div class="page__heading d-flex align-items-center">
        <div class="flex">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item"><a href="#">Главная</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Экспортеры</li>
                </ol>
            </nav>
            <h1 class="m-0">Экспортеры</h1>
        </div>
    </div>
</div>

<div class="container-fluid page__container">
    
    <div class="z-0">
        <ul class="nav nav-tabs nav-tabs-custom" role="tablist">
            <li class="nav-item">
                <a href="#expModeration" class="nav-link d-flex align-items-center flex-row active" data-toggle="tab" role="tab" aria-controls="expModeration" aria-selected="true">
                    На модерации
                    <span class="ml-2">@onModerationExporters.Count</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#expApproved" class="nav-link d-flex align-items-center flex-row" data-toggle="tab" role="tab" aria-selected="false">
                    Одобреные
                    <span class="ml-2">@approvedExporters.Count</span>
                </a>
            </li>
            <li class="nav-item">
                <a href="#expNotApproved" class="nav-link d-flex align-items-center flex-row" data-toggle="tab" role="tab" aria-selected="false">
                    Отказано
                    <span class="ml-2">@refusedExporters.Count</span>
                </a>
            </li>
        </ul>
        
        <div class="card">
            <div class="card-body tab-content">
                <div class="tab-pane active show fade" id="expModeration">
                    <div class="table-responsive mt-1 mb-4 container-fluid" data-toggle="lists" data-lists-values="[&quot;js-lists-values-employee-name&quot;]">
                        <table class="table table-striped table-hover mb-0 thead-border-top-0">
                            <thead>
                            <tr>
                                <th>№</th>
                                <th>Наименование</th>
                                <th>ФИО</th>
                                <th>Телефон</th>
                                <th></th>
                            </tr>
                            </thead>
                            <tbody class="list" id="staff02">
                            @for (var i = 0; i < onModerationExporters.Count; i++)
                            {
                                <tr>
                                    <td>
                                        @(i + 1)
                                    </td>
                                    <td>
                                        <span class="js-lists-values-employee-name">@Model.Exporters[i].Name</span>
                                    </td>
                                    <td>@Model.Exporters[i].ContactPersonSecondName @Model.Exporters[i].ContactPersonFirstName @Model.Exporters[i].ContactPersonPatronymic</td>
                                    <td>@Model.Exporters[i].Phone</td>
                                    <td align="right"><a class="btn btn-rounded btn-primary btn-sm" asp-page="/Admin/Exporters/Details" asp-route-id="@Model.Exporters[i].CommonExporterId">Подробнее</a></td>
                                </tr>
                            }
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="tab-pane show fade" id="expApproved">
                    <div class="table-responsive mt-1 mb-4 container-fluid" data-toggle="lists" data-lists-values="[&quot;js-lists-values-employee-name&quot;]">
                        <table class="table table-striped table-hover mb-0 thead-border-top-0">
                            <thead>
                            <tr>
                                <th>№</th>
                                <th>Наименование</th>
                                <th>ФИО</th>
                                <th>Телефон</th>
                                <th></th>
                            </tr>
                            </thead>
                            <tbody class="list" id="staff02">
                            @for (var i = 0; i < approvedExporters.Count; i++)
                            {
                                <tr>
                                    <td>
                                        @(i + 1)
                                    </td>
                                    <td>
                                        <span class="js-lists-values-employee-name">@Model.Exporters[i].Name</span>
                                    </td>
                                    <td>@Model.Exporters[i].ContactPersonSecondName @Model.Exporters[i].ContactPersonFirstName @Model.Exporters[i].ContactPersonPatronymic</td>
                                    <td>@Model.Exporters[i].Phone</td>
                                    <td align="right"><a class="btn btn-rounded btn-primary btn-sm" asp-page="/Admin/Exporters/Details" asp-route-id="@Model.Exporters[i].CommonExporterId">Подробнее</a></td>
                                </tr>
                            }
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="tab-pane show fade" id="expNotApproved">
                    <div class="table-responsive mt-1 mb-4 container-fluid" data-toggle="lists" data-lists-values="[&quot;js-lists-values-employee-name&quot;]">
                        <table class="table table-striped table-hover mb-0 thead-border-top-0">
                            <thead>
                            <tr>
                                <th>№</th>
                                <th>Наименование</th>
                                <th>ФИО</th>
                                <th>Телефон</th>
                                <th></th>
                            </tr>
                            </thead>
                            <tbody class="list" id="staff02">
                            @for (var i = 0; i < refusedExporters.Count; i++)
                            {
                                <tr>
                                    <td>
                                        @(i + 1)
                                    </td>
                                    <td>
                                        <span class="js-lists-values-employee-name">@Model.Exporters[i].Name</span>
                                    </td>
                                    <td>@Model.Exporters[i].ContactPersonSecondName @Model.Exporters[i].ContactPersonFirstName @Model.Exporters[i].ContactPersonPatronymic</td>
                                    <td>@Model.Exporters[i].Phone</td>
                                    <td align="right"><a class="btn btn-rounded btn-primary btn-sm" asp-page="/Admin/Exporters/Details" asp-route-id="@Model.Exporters[i].CommonExporterId">Подробнее</a></td>
                                </tr>
                            }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</div>

<style>

/* Style the tab */
.tab {
    overflow: hidden;
    border: 1px solid #ccc;
    background-color: #f1f1f1;
}

/* Style the buttons inside the tab */
.tab button {
    background-color: inherit;
    float: left;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 14px 16px;
    transition: 0.3s;
    font-size: 17px;
}

/* Change background color of buttons on hover */
.tab button:hover {
    background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
    background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
    display: none;
    padding: 6px 12px;
    border: 1px solid #ccc;
    border-top: none;
}
</style>

<script>
function changeList(evt, status) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(status).style.display = "block";
    evt.currentTarget.className += " active";
}
</script>