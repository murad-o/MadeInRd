@page
@using ExporterWeb.Helpers
@model ExporterWeb.Pages.Admin.Industries.IndexModel

<div class="form-group">
    <form method="get">
        <label asp-for="Language" class="control-label">Язык</label>
        <select asp-for="Language" class="form-control" id="language-switcher" asp-items="new SelectList(Languages.WhiteList)"></select>
    </form>
</div>

@foreach (var industry in Model.Industry)
{
    @if (industry.LogoPath() != "")
    {
        <div><img src="@industry.LogoPath()"></div>
    }
    <div>Название: @industry.Name</div>
    <div>Описание:</div>
    <div>@Html.Raw(industry.Description)</div>
    <a asp-page="./Translations" asp-route-id="@industry.IndustryId">Изменить</a>
     <div>
         <form method="post" 
               asp-page-handler="DeleteIndustry" 
               onsubmit="return confirm('Вы уверены что хотите удалить отрасль @industry.Name? При подтверждении удалится вся информация этой отрасли на всех языках')">
             <input type="hidden" name="id" value="@industry.IndustryId">
             <button type="submit">Удалить</button>
         </form>
     </div>
    <hr>
}

@section Scripts {
    <script>
        let languageSwitcher = document.getElementById('language-switcher');
        languageSwitcher.addEventListener('change', function() {
            let selectedLanguage = languageSwitcher.value;
            location.search = `?language=${selectedLanguage}`;
        });
    </script>
}
